<html>
<head>
  <title>System Monitor</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    .system { background: white; padding: 10px; margin: 10px; border-radius: 5px; }
    .up { color: green; }
    .down { color: red; }
  </style>
</head>
<body>
  <h1>System Monitor</h1>
  <div id="systems"></div>
  <script>
    async function update() {
      const res = await fetch('/status');
      const data = await res.json();
      const out = data.map(sys => `
        <div class="system">
          <h3>${sys.name} <span class="${sys.status}">${sys.status}</span></h3>
          <p>Uptime: ${sys.uptime || "--"}</p>
          <p>CPU: ${sys.cpu || "--"}% | Temp: ${sys.temp || "--"}Â°C</p>
          <p>fractal_esbcm: ${sys.task_cpu || "0.0"}% CPU</p>
          <p>eth0: ${sys.net_rx || "?"} RX / ${sys.net_tx || "?"} TX</p>
        </div>
      `).join("");
      document.getElementById('systems').innerHTML = out;
    }
    setInterval(update, 5000);
    update();
  </script>
</body>
</html>
